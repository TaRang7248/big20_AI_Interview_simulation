{
  "version": "2.0.0",
  "tasks": [
    {
      "label": "0. Prerequisites (Redis + Ollama ÌôïÏù∏)",
      "type": "shell",
      "command": "powershell",
      "args": [
        "-Command",
        "Write-Host 'üîç Redis ÌôïÏù∏ Ï§ë...' -ForegroundColor Yellow; try { $r = redis-cli ping 2>$null; if ($r -eq 'PONG') { Write-Host '‚úÖ Redis Ïó∞Í≤∞Îê®' -ForegroundColor Green } else { Start-Process redis-server.exe -WindowStyle Minimized; Start-Sleep 2; Write-Host 'üöÄ Redis ÏûêÎèô ÏãúÏûë' -ForegroundColor Green } } catch { Write-Host '‚ö†Ô∏è Redis ÎØ∏ÏÑ§Ïπò' -ForegroundColor Red }; Write-Host 'üîç Ollama ÌôïÏù∏ Ï§ë...' -ForegroundColor Yellow; try { ollama list 2>$null; if ($LASTEXITCODE -eq 0) { Write-Host '‚úÖ Ollama Ïã§Ìñâ Ï§ë' -ForegroundColor Green } else { Write-Host '‚ö†Ô∏è Ollama ÎØ∏Ïã§Ìñâ' -ForegroundColor Red } } catch { Write-Host '‚ö†Ô∏è Ollama ÎØ∏ÏÑ§Ïπò' -ForegroundColor Red }"
      ],
      "options": {
        "cwd": "${workspaceFolder}/CSH"
      },
      "presentation": {
        "reveal": "always",
        "panel": "dedicated",
        "group": "ai-interview",
        "close": true
      }
    },
    {
      "label": "1. Celery Worker",
      "type": "shell",
      "command": "${workspaceFolder}/interview_env/Scripts/python.exe",
      "args": [
        "-m",
        "celery",
        "-A",
        "celery_app",
        "worker",
        "--pool=solo",
        "--loglevel=info"
      ],
      "options": {
        "cwd": "${workspaceFolder}/CSH",
        "env": {
          "PATH": "${workspaceFolder}/interview_env/Scripts;${env:PATH}"
        }
      },
      "isBackground": true,
      "problemMatcher": [],
      "presentation": {
        "reveal": "always",
        "panel": "dedicated",
        "group": "ai-interview"
      }
    },
    {
      "label": "2-1. Next.js Build",
      "type": "shell",
      "command": "npm.cmd",
      "args": [
        "run",
        "build"
      ],
      "options": {
        "cwd": "${workspaceFolder}/CSH/frontend"
      },
      "problemMatcher": [],
      "presentation": {
        "reveal": "always",
        "panel": "dedicated",
        "group": "ai-interview"
      }
    },
    {
      "label": "2-2. Next.js Production Server",
      "type": "shell",
      "command": "npm.cmd",
      "args": [
        "run",
        "start"
      ],
      "options": {
        "cwd": "${workspaceFolder}/CSH/frontend"
      },
      "isBackground": true,
      "problemMatcher": [],
      "presentation": {
        "reveal": "always",
        "panel": "dedicated",
        "group": "ai-interview"
      },
      "dependsOn": [
        "2-1. Next.js Build"
      ]
    },
    {
      "label": "2. Next.js Frontend",
      "dependsOn": [
        "2-2. Next.js Production Server"
      ],
      "problemMatcher": []
    },
    {
      "label": "3. FastAPI Server",
      "type": "shell",
      "command": "${workspaceFolder}/interview_env/Scripts/python.exe",
      "args": [
        "-m",
        "uvicorn",
        "integrated_interview_server:app",
        "--host",
        "0.0.0.0",
        "--port",
        "8000"
      ],
      "options": {
        "cwd": "${workspaceFolder}/CSH",
        "env": {
          "PATH": "${workspaceFolder}/interview_env/Scripts;${env:PATH}"
        }
      },
      "isBackground": true,
      "problemMatcher": [],
      "presentation": {
        "reveal": "always",
        "panel": "dedicated",
        "group": "ai-interview"
      },
      "dependsOn": [
        "0. Prerequisites (Redis + Ollama ÌôïÏù∏)"
      ]
    },
    {
      "label": "üöÄ AI Î™®ÏùòÎ©¥Ï†ë ÏãúÏä§ÌÖú Ï†ÑÏ≤¥ ÏãúÏûë",
      "dependsOn": [
        "1. Celery Worker",
        "2. Next.js Frontend",
        "3. FastAPI Server"
      ],
      "dependsOrder": "sequence",
      "problemMatcher": [],
      "presentation": {
        "reveal": "always",
        "panel": "dedicated",
        "group": "ai-interview"
      },
      "group": {
        "kind": "build",
        "isDefault": true
      }
    }
  ]
}