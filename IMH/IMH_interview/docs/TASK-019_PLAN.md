# TASK-019: 공고 정책 엔진 설계 (Job Policy Engine) - Revised

## 1. 개요 및 철학 (Philosophy)

**"Job Posting is an AI Evaluation Schema"**

IMH AI 면접 시스템에서 공고(Job Posting)는 단순한 채용 정보 텍스트가 아니라, **AI 면접관의 평가 기준과 행동 양식을 규정하는 엄격한 스키마(Schema)**이다.
따라서 공고가 게시(Published)되는 순간, 이는 지원자와 시스템 간의 **변경 불가능한 계약(Immutable Contract)**이 성립됨을 의미한다.

본 문서는 이러한 철학을 바탕으로, 공고의 생명주기와 수정 가능 범위를 엄격히 제한하는 정책을 정의한다.

---

## 2. 공고 상태 정의 (Job Lifecycle)

공고는 다음 3가지 상태만을 가지며, 상태에 따라 수정 권한이 엄격히 통제된다.

| 상태 (Status) | 설명 (Description) | 정책 수정 권한 | 세션 생성 |
| :--- | :--- | :--- | :--- |
| **DRAFT** | 작성 중인 임시 저장 상태 | **전체 수정 가능** | 불가 |
| **PUBLISHED** | 지원자에게 공개되고 AI 기준이 확정된 상태 | **AI 민감 필드 수정 불가** | **가능** |
| **CLOSED** | 채용이 마감된 상태 | 수정 불가 (조회만 가능) | 불가 |

> **Warning: Irreversible Transition**
> "PUBLISHED 상태 전환은 되돌릴 수 없는 전이(Irreversible Transition)이다.
> PUBLISHED 이후 공고는 DRAFT 상태로 되돌릴 수 없으며,
> AI-Sensitive Fields는 어떠한 방식으로도 수정될 수 없다."

---

## 3. AI 민감 필드 및 수정 금지 원칙 (AI-Sensitive Fields)

**AI 민감 필드(AI-Sensitive Fields)**란 LLM의 컨텍스트, 질문 생성 로직, 평가 기준, 세션 진행 규칙에 영향을 미치는 모든 항목을 의미한다.
**PUBLISHED 상태 이후, 아래 필드는 절대 수정할 수 없다.** 수정 시도는 `ValidationError`로 차단된다.

### 3.1 컨텍스트 및 평가 기준 (Context & Criteria)
- **필수 자격요건 (Requirements)**: AI가 지원자의 자격 부합 여부를 판단하는 핵심 기준.
- **우대사항 (Preferences)**: 가산점 부여 및 심층 질문 생성의 기준.
- **요구 경력 수준 (Experience Level)**: 질문의 난이도(Depth)를 결정하는 기준.
- **직무 설명 (Description)**: AI가 직무 적합성을 판단하는 전체 맥락(Context).
- **인재상 & 기술 스택**: 평가의 방향성과 키워드 매칭 기준.

### 3.2 면접 진행 및 행동 제어 (Behavior Control)
- **질문 수 정책**: 최소/최대 질문 개수, 필수 질문 세트 구성.
- **제한 시간 설정**: 답변 제한 시간, 침묵 인식 임계값.
- **재질문/재시도 정책**: 답변 수정 기회나 다시 듣기 허용 여부.
- **모드 유형**: 실전(Actual) / 연습(Practice) 여부.

### 3.3 결과 및 점수 (Scoring & Result)
- **평가 가중치**: 직무/의사소통/태도 영역별 반영 비율.
- **결과 공개 정책**: 점수 및 합불 여부의 공개 범위와 시점.
  - *이유: 면접 도중 결과 공개 방침이 바뀌면 지원자 간 형평성 문제가 발생하므로, 이 또한 평가 스키마의 일부로 보아 고정한다.*

---

## 4. 게시 후 수정 가능 영역 (Editable Fields)

PUBLISHED 상태에서도 수정 가능한 항목은 **AI의 판단 로직과 무관한 메타데이터**로 한정한다.

- **마감일 연장**: 채용 기간 연장 (단, 단축은 신중해야 함).
- **채용 인원 (Headcount)**: TO 변경.
- **복리후생 & 사무실 위치**: 단순 정보성 데이터.
- **단순 문구 보완**: 오타 수정 등.
  - *단, 시스템은 '단순 수정'인지 '의미 변경'인지 판단하기 어려우므로, Description 필드 전체를 잠그는 것이 안전하며, 꼭 필요한 경우 별도의 '공지사항(Notice)' 필드를 통해 추가 정보를 제공하는 방식을 권장한다.*

---

## 5. 정책 스냅샷의 재정의 (Snapshot as Secondary Lock)

기존 계획에서의 스냅샷이 "세션 보호" 목적이었다면, 수정된 계획에서는 **"이중 잠금(Double Lock)"** 장치로 정의한다.

1.  **1차 잠금 (Schema Lock)**: `PUBLISHED` 전환 시점. 공고 원본 데이터가 수정 불가능해짐.
2.  **2차 잠금 (Instance Snapshot)**: 세션 생성 시점. `JobPolicy`를 `SessionConfig`로 복제.

이 구조를 통해, 만에 하나 DB 직접 수정 등으로 공고 원본이 변조되더라도, 이미 생성된 세션은 **생성 당시의 스냅샷**을 유지하여 무결성을 보장한다.

---

## 6. 상위 강제 규칙 (Hard Compliance)

공고 정책이 아무리 "스키마"로서 고정되더라도, 시스템 레벨의 상위 법규/규칙은 항상 우선한다.

### 2주 자동 통지 (Absolute Rule)
- 관리자가 공고 설정에서 "결과 비공개"나 "30일 후 공개"로 설정했더라도, 시스템은 **면접 종료 후 14일이 지나면 강제로 합/불합 여부를 통지**한다.
- 이는 공고 정책 엔진보다 상위의 **"플랫폼 정책(Platform Policy)"**이며, 어떤 공고 설정으로도 이를 무력화할 수 없다.

---

## 7. Out of Scope

본 문서는 정책적 설계를 다루며, 아래 항목은 포함하지 않는다.

- DB 스키마/마이그레이션 (`jobs` 테이블 설계 등)
- API 구현 (POST /jobs, PATCH /jobs)
- 프론트엔드 유효성 검사 로직
- 관리자(Admin) UI 기획
