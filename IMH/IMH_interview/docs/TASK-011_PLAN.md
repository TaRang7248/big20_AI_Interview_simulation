# TASK-011: 정량 평가 엔진 (루브릭 기반) 구현 계획

## 1. 개요
- **목표**: 면접 분석 결과(STT, Emotion, Visual 등)를 입력받아, 정해진 루브릭 기준에 따라 정량적 점수와 평가 근거(Evidence)를 산출하는 **Software Component**를 정의하고 구현한다.
- **역할**: 관측 데이터(Analysis Data)를 평가 정보(Evaluation Intelligence)로 변환하는 순수 로직 계층.
- **위치**: Phase 2 Analysis 결과와 Reporting 사이의 **Evaluation Layer**.

## 2. 범위 (Scope)

### 2.1 포함 (In-Scope)
- **평가 엔진 모듈 신규 구성**:
  - 외부 의존성 없이 독립적으로 동작 가능한 평가 로직 패키지.
- **영역별 평가 로직 구현**:
  - `_refs/루브릭 가이드`가 정의한 4대 영역(직무, 문제해결, 의사소통, 태도)별 점수 산출 로직.
  - 각 영역은 **입력 데이터 -> 로직 -> 점수/근거 반환**의 구조를 가짐.
  - 외부 모델(LLM/RAG 등)이 필요한 경우 **인터페이스/Mock**을 통해 로직 검증.
- **데이터 계약 준수**:
  - 직군별 가중치 적용 로직.
  - `evidence_data` JSON 스키마 구조 확정 및 생성.
  - `tag_code` 식별자 관리 정책 적용.

### 2.2 제외 (Out-of-Scope)
- **외부 Provider 실연동**:
  - LLM, Embedding, RAG 등 외부 API의 실제 호출은 포함하지 않음(Mock 처리).
- **데이터베이스 연동**:
  - 평가 결과를 DB에 저장(Insert/Update)하는 영속화 로직 제외.
- **사용자 인터페이스**:
  - 평가 결과를 시각화하거나 대시보드에 표현하는 작업 제외.

## 3. 관련 문서 및 근거
- **판단 기준**: `docs/_refs/26.02.09(월)정량평가 루브릭 가이드.md`
  - 평가 영역 정의, 채점 기준, 가중치 정책, 데이터 출력 포맷.
- **운영 표준**: `docs/00_AGENT_PLAYBOOK.md`
  - JSONB 데이터 포맷(`evidence_data`), 식별자(`tag_code`) 정책.

## 4. 요구사항 및 검증 체크리스트

### 4.1 평가 로직 검증 (Logic Verification)
- [ ] **직무 역량 평가**:
  - 기술적 키워드 및 개념 정확성을 판단하는 로직이 정상 동작하는가?
  - 코드 복잡성을 판단하는 로직이 입력된 코드 텍스트를 분석 가능한가?
- [ ] **문제 해결 능력 평가**:
  - 힌트 사용 빈도 등 정량적 지표가 점수에 반영되는가?
- [ ] **의사소통 능력 평가**:
  - 구조적 답변(STAR 기법 등) 여부를 판단하는 로직의 인터페이스가 정의되었는가?
- [ ] **비언어/태도 평가**:
  - 시각(Visual) 및 감정(Emotion) 분석 데이터가 점수 산출 공식에 올바르게 대입되는가?

### 4.2 데이터 계약 검증 (Contract Verification)
- [ ] **식별자 준수**: 모든 평가 항목이 약속된 문자열 식별자(`tag_code`)를 출력하는가?
- [ ] **구조 준수**: 생성된 `evidence_data`가 루브릭 가이드의 JSON 스키마를 만족하는가?
- [ ] **가중치 적용**: 설정된 직군(개발/비기술)에 따라 최종 점수가 다르게 계산되는가?

## 5. 인터페이스 및 데이터 흐름 계획

### 5.1 개념적 구조 (Architecture)
- **Input (Context)**:
  - 면접 답변 텍스트, 코드 스니펫
  - 선행 분석 결과 (Visual, Emotion, Voice 등의 Raw Data)
  - 면접 메타 정보 (직군, 질문 유형 등)
- **Process (Engine)**:
  - 영역별 독립적인 계산기(Calculator)들이 동작
  - 각 계산기는 Mockable한 의존성을 가짐
- **Output (Result)**:
  - 영역별/항목별 세부 점수 및 `tag_code`
  - 최종 가중 합산 점수
  - 점수 산출의 근거가 담긴 구조화된 데이터 (`evidence_data`)

### 5.2 데이터 입출력 예시 (Concept)
- **입력**: "답변 텍스트", "시선 데이터 리스트", "감정 클래스 리스트"
- **출력**: "직무 역량 점수(4점)", "근거: 키워드 매칭율 80%", "`tag_code`: capability.knowledge"

## 6. 테스트 및 검증 전략
- **검증 스크립트 작성**:
  - 가상의 면접 데이터를 주입하여 평가 엔진을 실행하는 스크립트.
  - 다양한 시나리오(만점 케이스, 과락 케이스, 데이터 누락 케이스)를 시뮬레이션.
- **성공 기준**:
  - 스크립트 실행 시 에러 없이 완료.
  - 산출된 JSON 데이터가 스키마 유효성 검사를 통과.
  - 로직에 따른 예상 점수와 산출 점수가 일치.

## 7. 리스크 관리
- **외부 의존성 분리**: NLP/LLM 로직의 복잡성으로 인한 테스트 불확실성을 제거하기 위해, 판단 로직(Decision Logic)과 판단 도구(Provider/Model)를 명확히 분리하여, 도구는 Mocking 가능하도록 설계한다.

## 8. 작업 단계
1. **Plan 승인**: 본 기획안의 적절성 확인.
2. **구현 (Implementation)**: 평가 엔진 모듈 및 영역별 로직 코드 작성.
3. **검증 (Verification)**: 시나리오 기반 검증 스크립트 실행 및 결과 확인.
4. **완료 (Completion)**: Task 상태 업데이트 및 산출물 기록.

---

## 승인 요청
TASK-011은 "평가 로직"을 시스템화하는 단계입니다.
구체적인 구현 방법(클래스 설계 등)은 구현 단계에서 결정하되, 본 계획서는 **"어떤 입력으로 무엇을 산출하며, 어떤 기준으로 검증할 것인가"**에 집중하였습니다.
루브릭 가이드의 정량적 기준을 소프트웨어 로직으로 변환하는 계획에 대해 승인을 요청합니다.
