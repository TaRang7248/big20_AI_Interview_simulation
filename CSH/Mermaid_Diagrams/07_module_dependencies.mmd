flowchart TD
    SERVER["integrated_interview_server.py\nMain Server - 5600 lines"]

    subgraph CORE["Core Modules"]
        SEC["security.py"]
        JSON["json_utils.py"]
        LATMON["latency_monitor.py"]
    end

    subgraph AI_MOD["AI Service Modules"]
        IW["interview_workflow.py"]
        TI["text_interview.py"]
        RRAG["resume_rag.py"]
        STT_M["stt_engine.py"]
        WHIS["whisper_stt_service.py"]
        HTTS["hume_tts_service.py"]
        HPRO["hume_prosody_service.py"]
        CEX["code_execution_service.py"]
        WBS["whiteboard_service.py"]
        DID_M["did_avatar_service.py"]
        SPA["speech_analysis_service.py"]
        GAZ["gaze_tracking_service.py"]
    end

    subgraph EVENT_MOD["Event System"]
        EB["event_bus.py"]
        EV["events.py"]
        EH["event_handlers.py"]
    end

    subgraph ASYNC_MOD["Async Processing"]
        CA["celery_app.py"]
        CT["celery_tasks.py"]
    end

    subgraph MEDIA_MOD["Media"]
        MR["media_recording_service.py"]
        PR["pdf_report_service.py"]
    end

    SERVER --> SEC & JSON & LATMON
    SERVER --> IW & TI & RRAG
    SERVER --> STT_M & WHIS & HTTS
    SERVER --> HPRO & CEX & WBS & DID_M
    SERVER --> SPA & GAZ
    SERVER --> EB & EH
    SERVER --> MR & PR

    IW --> RRAG
    IW --> JSON

    EB --> EV
    EH --> EB

    CT --> CA
    CT --> JSON
    CT -->|"Redis Pub/Sub"| EB

    RRAG -.->|"pgvector"| PG[("PostgreSQL")]
    SERVER -.->|"SQLAlchemy"| PG
    CA -.->|"Broker"| RD[("Redis")]
    EB -.->|"Pub/Sub"| RD
