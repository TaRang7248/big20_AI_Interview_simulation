stateDiagram-v2
    [*] --> IDLE: Session Created

    IDLE --> GREETING: Start Interview
    GREETING --> GENERATE_QUESTION: Greeting Done

    GENERATE_QUESTION --> WAIT_ANSWER: Question Generated and TTS
    note right of GENERATE_QUESTION
        RAG Context Search
        Resume + QA DB
    end note

    WAIT_ANSWER --> PROCESS_ANSWER: Answer Received
    WAIT_ANSWER --> INTERVENTION: Silence Detected 10s
    INTERVENTION --> WAIT_ANSWER: Prompt Message

    PROCESS_ANSWER --> EVALUATE: Evaluate Answer
    note right of EVALUATE
        LLM Eval + Emotion Analysis
        asyncio.gather parallel
    end note

    EVALUATE --> ROUTE_NEXT: Routing Decision

    ROUTE_NEXT --> FOLLOW_UP: Follow-up Needed\nmax 2 times
    ROUTE_NEXT --> GENERATE_QUESTION: Next Topic
    ROUTE_NEXT --> COMPLETE: Question Limit\nor Time Over

    FOLLOW_UP --> WAIT_ANSWER: Send Follow-up

    COMPLETE --> [*]: Generate Report
